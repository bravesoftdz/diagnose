/* NIKKEI */
/* GERAÇÃO AUTOMÁTICA DOS EXAMES DA TABELA AMB */

SET TERM ^ ;

CREATE TRIGGER TABAMB_AI0 FOR TABAMB
ACTIVE AFTER INSERT POSITION 0
AS
DECLARE VARIABLE CODEXAME INTEGER;
DECLARE VARIABLE CODEXAMB VARCHAR(15);
begin
  /* PREENCHO O ITTABAMB COM TODOS OS EXAMES */
  FOR
  SELECT
    CODIGO,
    CODEXAMB
  FROM
    EXAMES
  ORDER BY
    CODIGO
  INTO
    :CODEXAME,
    :CODEXAMB
  DO
  BEGIN

    /* INSIRO O EXAME */
    INSERT INTO
      ITTABAMB (
        CODTABAMB,
        CODEXAME,
        CODEXAMB,
        QTDE_CO,
        QTDE_HONORARIO,
        QTDE_FILME,
        MATERIAL)
      VALUES (
        NEW.CODIGO,
        :CODEXAME,
        :CODEXAMB,
        0,
        0,
        0,
        0);

  END
end

^

SET TERM ; ^

